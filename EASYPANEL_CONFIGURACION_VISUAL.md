
# ğŸ“¸ CONFIGURACIÃ“N VISUAL PARA EASYPANEL

## ğŸ¯ Basado en tus capturas de pantalla

He analizado las imÃ¡genes que subiste (`dok.jpg`, `dok2.jpg`, `escal.jpg`) y aquÃ­ estÃ¡ la configuraciÃ³n EXACTA que debes usar.

---

## ğŸ“‹ IMAGEN 1: ConfiguraciÃ³n de GitHub (dok.jpg)

### âŒ PROBLEMA DETECTADO:
En la captura se ve **"Error de validaciÃ³n"** y el campo **"Ruta de compilaciÃ³n"** estÃ¡ **vacÃ­o**.

### âœ… SOLUCIÃ“N:

#### PestaÃ±a: **GitHub**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Propietario *                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ qhosting                                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Nombre de usuario u organizaciÃ³n de Github â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repositorio *                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ escalafin-mvp                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Nombre del repositorio de Github           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ github.com / qhosting / escalafin-mvp       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rama *                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ main                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Esta debe ser una rama vÃ¡lida               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ruta de compilaciÃ³n *                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ /app                          âš ï¸ AQUÃ!  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Required                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

           [Guardar]
```

**âš ï¸ CRÃTICO**: El campo "Ruta de compilaciÃ³n" NO puede estar vacÃ­o. Debe ser: `/app`

---

## ğŸ“‹ IMAGEN 2: SelecciÃ³n de MÃ©todo de CompilaciÃ³n (dok2.jpg)

### Opciones Disponibles:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âšª Dockerfile                                â”‚
â”‚    Usa el comando "docker build" (docs)      â”‚
â”‚                                              â”‚
â”‚ âšª Buildpacks                                â”‚
â”‚    Elija sus buildpacks deseados             â”‚
â”‚                                              â”‚
â”‚ âšª Nixpacks                                  â”‚
â”‚    Nueva forma de crear aplicaciones desde   â”‚
â”‚    Railway (documentaciÃ³n)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… SELECCIONAR:
```
ğŸ”µ Dockerfile â† ESTA OPCIÃ“N
```

### DespuÃ©s de seleccionar Dockerfile, configurar:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dockerfile to use                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Dockerfile.step3-full                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Build context                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ .                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ IMAGEN 3: Panel de Coolify (escal.jpg)

Esta imagen muestra Coolify, pero has dicho que **NO usarÃ¡s Coolify**, asÃ­ que **IGNORAR**.

---

## ğŸ”§ CONFIGURACIÃ“N COMPLETA PASO A PASO

### PASO 1: Crear PostgreSQL

1. En EasyPanel, ir a **"Services"** â†’ **"+ Add Service"**
2. Seleccionar **"PostgreSQL"**
3. Configurar:
```
Name: escalafin-db
Version: 16 (latest)
Database Name: escalafin
Username: escalafin_user
Password: [Generar password seguro]
```
4. Click **"Create"**
5. **ESPERAR** a que el servicio estÃ© "Running" (1-2 minutos)

### PASO 2: Anotar DATABASE_URL

DespuÃ©s de crear PostgreSQL, EasyPanel te darÃ¡ el connection string:
```
postgresql://escalafin_user:TU_PASSWORD@escalafin-db:5432/escalafin?schema=public
```

**COPIAR ESTO** - lo necesitarÃ¡s en el siguiente paso.

---

### PASO 3: Crear App desde GitHub

1. En EasyPanel, ir a **"Apps"** â†’ **"+ Add App"**
2. Seleccionar **"GitHub"**

#### PestaÃ±a: **GitHub**
```
Propietario: qhosting
Repositorio: escalafin-mvp
Rama: main
Ruta de compilaciÃ³n: /app    âš ï¸ NO OLVIDAR
```

#### PestaÃ±a: **Build**
```
MÃ©todo: Dockerfile (seleccionar el radio button)
Dockerfile: Dockerfile.step3-full
Build Context: .
```

#### PestaÃ±a: **Environment**

Agregar estas variables (click "+ Add Variable" para cada una):

```env
# === DATABASE ===
DATABASE_URL=postgresql://escalafin_user:TU_PASSWORD@escalafin-db:5432/escalafin?schema=public

# === NEXTAUTH ===
NEXTAUTH_URL=https://escalafin-mvp.tu-dominio.com
NEXTAUTH_SECRET=[generar con: openssl rand -base64 32]

# === AWS S3 ===
AWS_BUCKET_NAME=tu-bucket-s3
AWS_FOLDER_PREFIX=escalafin/
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=tu-access-key
AWS_SECRET_ACCESS_KEY=tu-secret-key

# === OPENPAY ===
OPENPAY_MERCHANT_ID=tu-merchant-id
OPENPAY_PRIVATE_KEY=tu-private-key
OPENPAY_PUBLIC_KEY=tu-public-key
OPENPAY_API_ENDPOINT=https://sandbox-api.openpay.mx
OPENPAY_IS_SANDBOX=true

# === EVOLUTIONAPI ===
EVOLUTION_API_URL=tu-url-evolutionapi
EVOLUTION_API_KEY=tu-api-key
EVOLUTION_API_INSTANCE=tu-instance

# === BUILD ===
NODE_ENV=production
NEXT_OUTPUT_MODE=standalone
SKIP_ENV_VALIDATION=1
NEXT_TELEMETRY_DISABLED=1
PORT=3000
```

#### PestaÃ±a: **Domain**
```
Custom Domain: escalafin-mvp.tu-dominio.com
```

#### PestaÃ±a: **Resources**
```
CPU: 1-2 cores
Memory: 2GB minimum (4GB recomendado)
Replicas: 1
```

---

### PASO 4: Deploy

1. Click **"Create App"**
2. EasyPanel comenzarÃ¡ el build automÃ¡ticamente
3. Ir a **"Logs"** para monitorear el progreso

---

## ğŸ” LOGS QUE DEBES VER (Ã‰xito)

```log
Step 1/25 : FROM node:18-alpine AS base
 ---> [image id]
Step 2/25 : RUN apk add --no-cache...
 ---> [image id]
...
=== ğŸ“¦ Instalando dependencias ===
âœ… Dependencias instaladas
...
=== ğŸ”§ Generando Prisma Client ===
âœ… Prisma Client generado
...
=== ğŸ—ï¸  Building Next.js ===
âœ… Build completado
âœ… Standalone verificado
...
Successfully built [image id]
Successfully tagged escalafin-mvp:latest
```

Y despuÃ©s del deploy:
```log
âœ… Esperando PostgreSQL...
PostgreSQL estÃ¡ disponible
âœ… Aplicando migraciones Prisma...
âœ… Migraciones aplicadas exitosamente
âœ… Ejecutando seed inicial...
âœ… Seed completado
â–² Next.js 14.x.x
- Local:        http://0.0.0.0:3000
âœ“ Ready in XXXms
```

---

## ğŸ› ERRORES COMUNES Y SOLUCIONES

### âŒ "Build Path required"
**Causa**: Campo "Ruta de compilaciÃ³n" vacÃ­o (como en tu captura dok.jpg)
**SoluciÃ³n**: Poner `/app`

### âŒ "Dockerfile not found"
**Causa**: Dockerfile especificado incorrectamente
**SoluciÃ³n**: Usar `Dockerfile.step3-full` (no solo "Dockerfile")

### âŒ "Cannot connect to database"
**Causa**: PostgreSQL no estÃ¡ running o DATABASE_URL incorrecta
**SoluciÃ³n**: 
1. Verificar que escalafin-db estÃ¡ "Running"
2. Verificar DATABASE_URL tiene el formato correcto
3. Esperar 1-2 minutos y reintentar

### âŒ "NEXTAUTH_SECRET is not set"
**Causa**: Variable de entorno faltante
**SoluciÃ³n**: Generar con `openssl rand -base64 32` y agregar

### âŒ "server.js not found"
**Causa**: Standalone build no se generÃ³
**SoluciÃ³n**: Verificar que NEXT_OUTPUT_MODE=standalone estÃ¡ configurado

---

## âœ… CHECKLIST VISUAL

Antes de hacer click en "Create App", verificar:

```
âœ“ PostgreSQL "escalafin-db" estÃ¡ Running
âœ“ DATABASE_URL copiado y pegado en Environment
âœ“ NEXTAUTH_SECRET generado y configurado
âœ“ Campo "Ruta de compilaciÃ³n": /app (NO VACÃO)
âœ“ MÃ©todo de compilaciÃ³n: Dockerfile (radio button seleccionado)
âœ“ Dockerfile especificado: Dockerfile.step3-full
âœ“ Todas las variables de entorno configuradas
âœ“ Dominio configurado
âœ“ Recursos asignados (mÃ­nimo 2GB RAM)
```

---

## ğŸ¯ FLUJO COMPLETO

```
1. Crear PostgreSQL
   â†“
2. Esperar a que estÃ© Running
   â†“
3. Copiar DATABASE_URL
   â†“
4. Crear App desde GitHub
   â†“
5. Configurar:
   - GitHub: qhosting/escalafin-mvp, main, /app
   - Build: Dockerfile, Dockerfile.step3-full
   - Environment: Todas las variables
   â†“
6. Create App
   â†“
7. Monitorear Logs
   â†“
8. Â¡Success! ğŸ‰
```

---

## ğŸ“ SI ALGO FALLA

**NO TOCAR NADA MÃS**. 

Tomar captura de pantalla de:
1. ConfiguraciÃ³n completa (GitHub tab)
2. Logs del build
3. Variables de entorno

Y mostrar las capturas para identificar el problema exacto.

---

Â¡Sigue estos pasos EXACTAMENTE y el deploy funcionarÃ¡! ğŸš€
