
# üéØ INSTRUCCIONES PASO A PASO (CON IM√ÅGENES)

## üî¥ PROBLEMA QUE EST√ÅS VIENDO

Tu screenshot `dok.jpg` muestra:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Error de validaci√≥n                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Propietario *                              ‚îÇ
‚îÇ  qhosting                                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  Repositorio *                              ‚îÇ
‚îÇ  escalafin-mvp                             ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  Rama *                                     ‚îÇ
‚îÇ  main                                       ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  Ruta de compilaci√≥n *                      ‚îÇ
‚îÇ  |                          üëà ‚ùå VAC√çO     ‚îÇ
‚îÇ  Required                                   ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  [Guardar]                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**EL PROBLEMA**: El campo "Ruta de compilaci√≥n" est√° vac√≠o pero es REQUERIDO.

## ‚úÖ SOLUCI√ìN (3 CLICS)

### Paso 1: Ir a la Configuraci√≥n

```
1. En EasyPanel, abre tu proyecto "escalafin_mvp"
2. Ve a la pesta√±a "Settings" o "Configuraci√≥n"
3. Busca la secci√≥n "GitHub" o "Source"
```

### Paso 2: Llenar el Campo Vac√≠o

En el campo **"Ruta de compilaci√≥n"** (Build Path) escribe:

```
/
```

S√≠, solo un slash `/`. As√≠ debe quedar:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Ruta de compilaci√≥n *                      ‚îÇ
‚îÇ  /                         üëà ‚úÖ LLENO      ‚îÇ
‚îÇ  Esta debe ser una rama v√°lida...           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Paso 3: Guardar y Reconstruir

1. Click en **"Guardar"** (bot√≥n verde)
2. El error debe desaparecer ‚úÖ
3. Ve a la pesta√±a de tu aplicaci√≥n
4. Click en **"Rebuild"** o **"Reconstruir"**
5. Espera 5-10 minutos

## üì∏ TU SEGUNDO SCREENSHOT (dok2.jpg)

Muestra las opciones de compilaci√≥n. Debes seleccionar:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Compilaci√≥n                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚óã Dockerfile                              ‚îÇ  üëà ‚úÖ SELECCIONA ESTA
‚îÇ    Usa el comando "docker build"           ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚óã Buildpacks                              ‚îÇ  üëà ‚ùå NO ESTA
‚îÇ    Elija sus buildpacks deseados           ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚óã Nixpacks                                ‚îÇ  üëà ‚ùå NO ESTA
‚îÇ    Nueva forma de crear aplicaciones...    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**IMPORTANTE**: Debes seleccionar **Dockerfile** (primera opci√≥n).

## üåê Variables de Entorno

Aseg√∫rate de tener M√çNIMO estas variables configuradas:

### En EasyPanel > Tu App > Environment Variables

```bash
# Base de Datos (OBLIGATORIA)
DATABASE_URL=postgresql://usuario:password@host:5432/database?schema=public

# NextAuth (OBLIGATORIAS)
NEXTAUTH_URL=https://tu-app.easypanel.host
NEXTAUTH_SECRET=un-string-aleatorio-muy-largo-minimo-64-caracteres-aqui

# Puerto (OPCIONAL, por defecto es 3000)
PORT=3000
```

**NOTA**: Si usas Railway, Supabase, o Render para la base de datos, copia la URL directamente de ah√≠.

## üîÑ Proceso de Rebuild

Cuando hagas rebuild, en los logs ver√°s esto:

### ‚úÖ Build Exitoso:
```
üì¶ Instalando dependencias...
‚úÖ 387 paquetes instalados
üîß Generando Prisma Client...
üèóÔ∏è  Building Next.js...
‚úÖ Build completado
üìÇ Verificando estructura del standalone...
‚úÖ server.js encontrado en standalone/app/
```

### üöÄ Runtime Exitoso:
```
üöÄ Iniciando ESCALAFIN...
üì¶ PATH configurado
üîÑ Aplicando migraciones si es necesario...
‚úÖ Migraciones aplicadas correctamente
üå± Verificando si necesita seed...
üë• Usuarios en la base de datos: 3
‚úÖ Base de datos ya tiene usuarios, omitiendo seed
‚úÖ server.js encontrado en /app/server.js
üöÄ Iniciando servidor Next.js standalone...
üéâ EJECUTANDO: node server.js
```

### ‚ùå Si ves errores:

**Error de m√≥dulo no encontrado:**
```
Error: Cannot find module 'next/dist/server/next-server'
```
‚Üí Limpia el cache de build y reconstruye

**Error de base de datos:**
```
Error: P1001: Can't reach database server
```
‚Üí Verifica tu DATABASE_URL y que el firewall permita conexiones desde EasyPanel

## üéØ Checklist Visual

Antes de hacer rebuild, verifica que TODO est√© marcado:

```
EasyPanel Configuraci√≥n:
[X] Propietario: qhosting
[X] Repositorio: escalafin-mvp
[X] Rama: main
[X] Ruta de compilaci√≥n: /                  üëà ESTE ERA EL QUE FALTABA
[X] M√©todo: Dockerfile (seleccionado)

Variables de Entorno:
[X] DATABASE_URL configurada
[X] NEXTAUTH_URL configurada
[X] NEXTAUTH_SECRET configurada

Recursos:
[X] Memoria: 2GB (recomendado)
[X] CPU: 1 vCore

Red:
[X] Puerto: 3000
[X] Protocolo: HTTP
```

## üì± Acceso a la Aplicaci√≥n

Una vez que el build termine y el health check est√© ‚úÖ:

1. Tu URL ser√° algo como: `https://escalafin-xxxx.easypanel.host`
2. Abre la URL en el navegador
3. Deber√≠as ver la pantalla de login de ESCALAFIN
4. Usa las credenciales de prueba (ver CREDENCIALES_PRUEBA.md)

## üÜò Si TODAV√çA No Se Ve

Si despu√©s de hacer TODO lo anterior sigue sin verse:

### 1. Verifica el Health Check

En EasyPanel, busca el estado del health check:
- ‚úÖ HEALTHY = La app est√° corriendo
- ‚ùå UNHEALTHY = Hay un problema

### 2. Revisa los Logs

En EasyPanel > Logs, busca la √∫ltima l√≠nea. Debe decir:
```
üéâ EJECUTANDO: node server.js
```

Si no lo dice, o hay errores, **copia TODO el log** y comp√°rtelo.

### 3. Prueba el Endpoint de Health

Abre en tu navegador:
```
https://tu-app.easypanel.host/api/health
```

Deber√≠as ver:
```json
{
  "status": "ok",
  "timestamp": "2025-10-24T...",
  "uptime": 123.45
}
```

Si NO ves eso, hay un problema con el routing.

## üìû Soporte Adicional

Si nada de esto funciona, necesito que me compartas:

1. **Screenshot completo de los logs** del container en EasyPanel
2. **Screenshot de las variables de entorno** (puedes ocultar los valores sensibles)
3. **Screenshot del estado del health check**
4. **La URL** completa donde est√° desplegado

Con eso puedo diagnosticar exactamente qu√© est√° pasando.

---

**Creado**: 24 de Octubre, 2025
**√öltima actualizaci√≥n de GitHub**: Commit `5742e95`
**Siguiente paso**: Agregar `/` en "Ruta de compilaci√≥n" y rebuild
